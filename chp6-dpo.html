

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 6: Evolving Graphs &#8212; Relational thinking: from Abstractions to Applications</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chp6-dpo';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 7: A Look Beyond– Evolving World Models" href="chp7-dpo-application.html" />
    <link rel="prev" title="Chapter 5: Combining Graphs" href="chp5-graph-gluing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo-white.jpg" class="logo__image only-light" alt="Relational thinking: from Abstractions to Applications - Home"/>
    <script>document.write(`<img src="_static/logo-white.jpg" class="logo__image only-dark" alt="Relational thinking: from Abstractions to Applications - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chp0.html">Chapter 0: Directed Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp1-directed-graphs.html">Chapter 1: Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp2-dwd.html">Chapter 2: Dynamical Systems with Kiki and Bouba</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp3-schemas.html">Chapter 3: Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp4-graph-relationships.html">Chapter 4: Categories</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp5-graph-gluing.html">Chapter 5: Combining Graphs</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 6: Evolving Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp7-dpo-application.html">Chapter 7: A Look Beyond– Evolving World Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/ToposInstitute/AlgJulia-Book/main?urlpath=tree/./chp6-dpo.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ToposInstitute/AlgJulia-Book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ToposInstitute/AlgJulia-Book/issues/new?title=Issue%20on%20page%20%2Fchp6-dpo.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chp6-dpo.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="_sources/chp6-dpo.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 6: Evolving Graphs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">6.1 Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specs-for-find-and-replace">6.2 Specs for “find and replace”</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-delete-and-add">Replace = Delete and Add</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-match">6.3 Finding a match</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#removing-vertices-and-edges-from-a-graph">6.4 Removing vertices and edges from a graph</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-match-to-remove-vertices-edges">Finding a match to remove vertices/edges</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performing-deletion">Performing deletion</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-the-requirements-of-a-match">Managing the requirements of a match</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-vertices-and-edges-to-a-graph">6.5 Adding vertices and edges to a graph</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-few-use-cases-of-find-and-replace">6.6 A few use cases of find-and-replace</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#chemistry">Chemistry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#game-design">Game design</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#algebraic-julia-for-find-and-replace-in-graphs">6.7 Algebraic Julia for find-and-replace in graphs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-matches-of-a-search-pattern">Finding matches of a search pattern</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-this-a-pushout-complement">Is this a pushout complement?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-double-pushouts">Computing double-pushouts</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-thinking-is-hard-but-good">6.8 Relational thinking is hard but good!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-thinking-shifts-vocabulary">Relational thinking shifts vocabulary</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-order-of-processes">The order of processes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">6.9 Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#footnotes-and-references">Footnotes and References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-6-evolving-graphs">
<h1>Chapter 6: Evolving Graphs<a class="headerlink" href="#chapter-6-evolving-graphs" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>6.1 Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>The “Find-and-replace” feature of text editors is one of the most powerful innovations of the 20th century. Inspite of the unavailability of statistics, the advantage of this feature is tangible and undeniable! Beyond text editors, the concept of “find and replace” has also caused much chaos in the world! When the European conquerors “found” native Americans settlements in Canada, they decided to “replace” the native culture by sending an entire generation of native American children to special missionary schools. This has resulted in trauma and chaos that continues well into the current times. Or a country waging war over another country to replace the exisiting government for political reasons! Or the large-scale replacement of forests by industries and settlements has adversely impacting global climate. We know in hindsight this approach has lead humanity to face issues bigger than they the ones it intended to solve!</p>
<blockquote>
<div><p>So, what was missed in the decision making process?</p>
</div></blockquote>
<p>Let us consider a fun and non-political example – the struggle of qutting sugar. Here is a simple explanation of a why quitting sugar is so hard! A usual thought-process behind attempting to quit sugar is:</p>
<a class="reference internal image-reference" href="_images/quit-sugar-1.png"><img alt="Whoopsy!" class="align-center" src="_images/quit-sugar-1.png" style="width: 550px;" /></a>
<p>But the reality is:</p>
<a class="reference internal image-reference" href="_images/quit-sugar-2.png"><img alt="Whoopsy!" class="align-center" src="_images/quit-sugar-2.png" style="width: 350px;" /></a>
<p><sub> Image source: <a class="reference external" href="https://www.youtube.com/watch?v=86uC5fgraiI">https://www.youtube.com/watch?v=86uC5fgraiI</a> </sub></p>
<p>because, the connections are broken causing the system to experience instability:</p>
<a class="reference internal image-reference" href="_images/quit-sugar-3.png"><img alt="Whoopsy!" class="align-center" src="_images/quit-sugar-3.png" style="width: 350px;" /></a>
<p>(Naively) Being healthy and eating sugar makes a person happy in a different ways. Hence, removing sugar results in a broken connection and an unstable structure! The result is usually to restore stability by brining (more) sugar back! Even though this example is oversimplistic, it drives home the message connections playing an important role in driving our lives and why careful considerations of connections is necessary to make a positive change.</p>
<p>If we want to make a change, it is recommended to start with something simple. The simple thing we shall do in this chapter is to build a way to make changes to an existing graph in a “good” way. By good, we mean that we do not end up with broken connections, and make precisely the changes that are intended.</p>
<p>Making changes to a graph means adding new vertices/edges or removing existing vertices/edges or both. And these changes happen over particular region(s) of the graph (like a textual find and replace).</p>
<p>A lot of concepts in the world around us are modelled as graphs. Hence, building a way to changing an existing graph that is guaranteed to be good is much more than just a theoretical exercise.</p>
<p>Let us begin!</p>
<p>Given a pattern (a graph), and its replacement, our mission is to “find” the pattern in any host graph and “replace” it in a good way!</p>
</section>
<section id="specs-for-find-and-replace">
<h2>6.2 Specs for “find and replace”<a class="headerlink" href="#specs-for-find-and-replace" title="Permalink to this heading">#</a></h2>
<p>Let us say, we have a document in which we would like to replace some text by some other text. The Microsoft Word software provides an interface such as the one shown in the picture below for performing such “find-and-replace”.</p>
<a class="reference internal image-reference" href="_images/find-and-replace.png"><img alt="Whoopsy!" class="align-center" src="_images/find-and-replace.png" style="width: 450px;" /></a>
<div class="admonition-pause-and-ponder admonition">
<p class="admonition-title">Pause and ponder</p>
<p>Let us say, we have a graph. How would the interface for find-and-replace in graphs look like?</p>
</div>
<p>To begin with, let us think what would be filled in the “Find what:” and “Replace with:” boxes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">what</span></code> box will take in a graph. This is the search pattern that will be matched in a host graph. The <code class="docutils literal notranslate"><span class="pre">Replace</span> <span class="pre">with</span></code> box will also take in a graph. This is the pattern that will replace the match found.</p>
<p>For example,</p>
<a class="reference internal image-reference" href="_images/FR-step1.png"><img alt="Whoopsy!" class="align-center" src="_images/FR-step1.png" style="width: 450px;" /></a>
</br>
<p>Let us try applying the above “find-and-replace” to the host graph below.</p>
<a class="reference internal image-reference" href="_images/host-graph.png"><img alt="Whoopsy!" class="align-center" src="_images/host-graph.png" style="width: 300px;" /></a>
</br>
<p>We must first find a match of the <code class="docutils literal notranslate"><span class="pre">Find</span></code> in the host graph. Can you find one?</p>
<a class="reference internal image-reference" href="_images/host-graph-match.png"><img alt="Whoopsy!" class="align-center" src="_images/host-graph-match.png" style="width: 300px;" /></a>
</br>
<p>Now let us, try replacing the match with the <code class="docutils literal notranslate"><span class="pre">Replace</span></code>. But, there seems to be two different ways in which the match can be replaced, as shown below!</p>
<a class="reference internal image-reference" href="_images/replacements.png"><img alt="Whoopsy!" class="align-center" src="_images/replacements.png" style="width: 475px;" /></a>
<p>So what are we missing? In text documents, there is only one way of replacing a text by another once a match has been found. But in graphs, there are multiple ways of replacing one graph by another unless we say how the <code class="docutils literal notranslate"><span class="pre">Find</span></code> and the <code class="docutils literal notranslate"><span class="pre">Replace</span></code> relate.</p>
<p>For example, in Replacement-1, the middle vertex and the self-loop of the <code class="docutils literal notranslate"><span class="pre">Replace</span></code> is placed at the match.</p>
<a class="reference internal image-reference" href="_images/replacement-1.png"><img alt="Whoopsy!" class="align-center" src="_images/replacement-1.png" style="width: 575px;" /></a>
</br>
<p>In Replacement-2, the left-most node of the replacement at the match is placed at the match.</p>
<a class="reference internal image-reference" href="_images/replacement-2.png"><img alt="Whoopsy!" class="align-center" src="_images/replacement-2.png" style="width: 575px;" /></a>
</br>
<p>For the find-and-replace operation to choose precisely one of these replacements, in addition to providing the graphs for <code class="docutils literal notranslate"><span class="pre">Find</span></code> and <code class="docutils literal notranslate"><span class="pre">Replace</span></code>, we must also specify <em>where the search pattern and its replacement meet or overlap.</em></p>
<div class="admonition-pause-and-ponder admonition">
<p class="admonition-title">Pause and ponder!</p>
<p>How would you specify overlap <code class="docutils literal notranslate"><span class="pre">Find</span></code> and <code class="docutils literal notranslate"><span class="pre">Replace</span></code>?</p>
</div>
<p>We know from Chapter 5, how to specify overlap between two graphs :) Do you remember the diagram with two radiating graph morphisms?</p>
<a class="reference internal image-reference" href="_images/11.png"><img alt="Whoopsy!" class="align-center" src="_images/11.png" style="width: 300px;" /></a>
<p>We will use the same idea to specify the overlap between <code class="docutils literal notranslate"><span class="pre">Find</span></code> and <code class="docutils literal notranslate"><span class="pre">Replace</span></code>. An extra requirement will be that the morphisms need to be <strong>injective</strong>. This ensures that, no two vertices of <code class="docutils literal notranslate"><span class="pre">Find</span></code> overlap with the same vertex of <code class="docutils literal notranslate"><span class="pre">Replace</span></code>, and vice versa. Similarly, no two edges of <code class="docutils literal notranslate"><span class="pre">Find</span></code> overlap with the same edge of <code class="docutils literal notranslate"><span class="pre">Replace</span></code>, and vice versa.</p>
<div class="admonition-puzzle-1 admonition">
<p class="admonition-title">Puzzle 1</p>
<p>How do the graphs <code class="docutils literal notranslate"><span class="pre">Find</span></code> and <code class="docutils literal notranslate"><span class="pre">Replace</span></code> overlap in case of Replacement-1 and Replacement-2?</p>
<a class="reference internal image-reference" href="_images/puzzle-1-data.png"><img alt="Whoopsy!" class="align-center" src="_images/puzzle-1-data.png" style="width: 450px;" /></a>
<a class="reference internal image-reference" href="_images/21.png"><img alt="Whoopsy!" class="align-center" src="_images/21.png" style="width: 600px;" /></a>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="wrapper docutils">
<p>The specification for the overlaps are as follows!</p>
<p>For replacement-1,</p>
<a class="reference internal image-reference" href="_images/31.png"><img alt="Whoopsy!" class="align-center" src="_images/31.png" style="width: 575px;" /></a>
<p>and replacement-2:</p>
<a class="reference internal image-reference" href="_images/41.png"><img alt="Whoopsy!" class="align-center" src="_images/41.png" style="width: 625px;" /></a>
</div>
</div>
<section id="replace-delete-and-add">
<h3>Replace = Delete and Add<a class="headerlink" href="#replace-delete-and-add" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="_images/interfaceExample.png"><img alt="Whoopsy!" class="align-center" src="_images/interfaceExample.png" style="width: 625px;" /></a>
<p>Let us now have a closer look at the replacement procedure.</p>
<p>During the replacement procedure, the vertices and edges of <code class="docutils literal notranslate"><span class="pre">Find</span></code> which do not overlap with <code class="docutils literal notranslate"><span class="pre">Replace</span></code> are removed from the match. For example, in the picture above, the self-loop of the search pattern is outside the overlap region. So, it is removed from the host graph at the match during the replacement procedure. Only those vertices and edges in the search pattern which overlap with the replacement are alone retained. From this view point, the morphism from <code class="docutils literal notranslate"><span class="pre">overlap</span></code> to <code class="docutils literal notranslate"><span class="pre">Find</span></code> is a <strong>rule for deletion</strong> (of vertices and edges at a match).</p>
<p>During the replacement procedure, the vertices and the edges of (<code class="docutils literal notranslate"><span class="pre">Replace</span></code>) outside the overlap region are added to the host graph at the match. For example, in the picture above, the unlabelled vertices and edges of <code class="docutils literal notranslate"><span class="pre">Replace</span></code> are outside the overlap region. We could see that they are added to the host graph during the replacement. From this view point, the morphism from <code class="docutils literal notranslate"><span class="pre">overlap</span></code> to <code class="docutils literal notranslate"><span class="pre">Replace</span></code> is a <strong>rule for addition</strong> (of vertices and edges at a match).</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">overlap</span></code> shape remains unchanged during the replacement. The overlap is precisely what remains after removing the edges/vertices of <code class="docutils literal notranslate"><span class="pre">Find</span></code> as per the deletion rule.</p>
<p>Thus, a specification for “find-and-replace” in graphs consists of a deletion rule and an addition rule:</p>
<a class="reference internal image-reference" href="_images/5.png"><img alt="Whoopsy!" class="align-center" src="_images/5.png" style="width: 625px;" /></a>
<p>Neat, huh?!</p>
<div class="admonition-puzzle-2 admonition">
<p class="admonition-title">Puzzle 2</p>
<div class="wrapper docutils">
<p>Find the overlap between <code class="docutils literal notranslate"><span class="pre">Find</span></code> and <code class="docutils literal notranslate"><span class="pre">Replace</span></code> for the following replacement:</p>
<a class="reference internal image-reference" href="_images/puzzle-2.png"><img alt="Whoopsy!" class="align-center" src="_images/puzzle-2.png" style="width: 625px;" /></a>
<div class="dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/61.png"><img alt="Whoopsy!" class="align-center" src="_images/61.png" style="width: 425px;" /></a>
</div>
</div>
</div>
</div>
<div class="admonition-puzzle-3 admonition">
<p class="admonition-title">Puzzle 3</p>
<div class="wrapper docutils">
<p>Apply the following replacement in the host graph. The match between <code class="docutils literal notranslate"><span class="pre">Find</span></code> and the host graph is indicated by the matching numbers on their vertices.</p>
<a class="reference internal image-reference" href="_images/puzzle-3.png"><img alt="Whoopsy!" class="align-center" src="_images/puzzle-3.png" style="width: 525px;" /></a>
<div class="dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/puzzle-3-sol.png"><img alt="Whoopsy!" class="align-center" src="_images/puzzle-3-sol.png" style="width: 325px;" /></a>
</div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Key points</p>
<p>The interface to find-and-replace needs to have:</p>
<a class="reference internal image-reference" href="_images/8.png"><img alt="Whoopsy!" class="align-center" src="_images/8.png" style="width: 450px;" /></a>
<ul class="simple">
<li><p>The injective morphism into <code class="docutils literal notranslate"><span class="pre">Find</span></code> is a <strong>specification for deletion</strong>.</p></li>
<li><p>The injective morphism into <code class="docutils literal notranslate"><span class="pre">Replace</span></code> is a <strong>specification for addition</strong>.</p></li>
</ul>
</div>
</section>
</section>
<section id="finding-a-match">
<h2>6.3 Finding a match<a class="headerlink" href="#finding-a-match" title="Permalink to this heading">#</a></h2>
<p>The next step is to answer how to find a match of <code class="docutils literal notranslate"><span class="pre">Find</span></code> inside a host graph, similar to finding some text in a document. When a text editor receives an input like this, it find (exact) matches of the string of characters “Happy Priyaa”.</p>
<a class="reference internal image-reference" href="_images/find-and-replace-text.png"><img alt="Whoopsy!" class="align-center" src="_images/find-and-replace-text.png" style="width: 250px;" /></a>
<p>However, in graph, <strong>connectivity matters</strong>. So when matching <code class="docutils literal notranslate"><span class="pre">Find</span></code> in a host graph, rather than an exact match, we look for matches which have similar connectivity as <code class="docutils literal notranslate"><span class="pre">Find</span></code>. Do the words “similar connectivity” a ring bell? Similar connectivity implies  graph morphism.</p>
<div class="admonition-what-is-a-match admonition">
<p class="admonition-title">What is a match?</p>
<p>A match is a graph morphism from <code class="docutils literal notranslate"><span class="pre">Find</span></code> to a host host graph.</p>
</div>
<p>Let us suppose we want to find a match <code class="docutils literal notranslate"><span class="pre">Find</span></code> in this host graph:</p>
<a class="reference internal image-reference" href="_images/9.png"><img alt="Whoopsy!" class="align-center" src="_images/9.png" style="width: 350px;" /></a>
</br>
<p>There are two possible matches. The mapping (match) is shown using matching labels for the vertices and the edges.</p>
<a class="reference internal image-reference" href="_images/10.png"><img alt="Whoopsy!" class="align-center" src="_images/10.png" style="width: 350px;" /></a>
</br>
<p>The below match, has vertices “1” and “2” in the search pattern, mapped to the same vertex in the host graph.</p>
<a class="reference internal image-reference" href="_images/111.png"><img alt="Whoopsy!" class="align-center" src="_images/111.png" style="width: 350px;" /></a>
</br>
<p>The first match is an injective morphism whereas the second one isn’t</p>
<p>Let us strengthen our understanding!</p>
<div class="admonition-puzzle-4 admonition" id="puzzle-4">
<p class="admonition-title">Puzzle 4</p>
<p>Find at least two matches of the search pattern in the host graph.</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/12.png"><img alt="Whoopsy!" class="align-center" src="_images/12.png" style="width: 350px;" /></a>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution for Puzzle 4</p>
<div class="wrapper docutils">
<p>An exact match:</p>
<a class="reference internal image-reference" href="_images/13.png"><img alt="Whoopsy!" class="align-center" src="_images/13.png" style="width: 350px;" /></a>
<p>Non-injective match:</p>
<a class="reference internal image-reference" href="_images/14.png"><img alt="Whoopsy!" class="align-center" src="_images/14.png" style="width: 350px;" /></a>
<p>As you notice, there can be many possible (or no) matches of <code class="docutils literal notranslate"><span class="pre">Find</span></code> in the host graph.</p>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Key points</p>
<p>A <em>match</em> in a host graph is given by a morphism from <code class="docutils literal notranslate"><span class="pre">Find</span></code> to a host graph! There can be multiple or no match of <code class="docutils literal notranslate"><span class="pre">Find</span></code> in a host.</p>
</div>
</section>
<section id="removing-vertices-and-edges-from-a-graph">
<h2>6.4 Removing vertices and edges from a graph<a class="headerlink" href="#removing-vertices-and-edges-from-a-graph" title="Permalink to this heading">#</a></h2>
<p>We now know how to specify “find-and-replace” in terms of deletion and addition rules, and how to specify a match. What remains is to apply these specifications to perform the find-and-replace!</p>
<a class="reference internal image-reference" href="_images/15.png"><img alt="Whoopsy!" class="align-center" src="_images/15.png" style="width: 350px;" /></a>
<p>We will begin with the deletion, that is removing vertices and edges at the match!</p>
<section id="finding-a-match-to-remove-vertices-edges">
<h3>Finding a match to remove vertices/edges<a class="headerlink" href="#finding-a-match-to-remove-vertices-edges" title="Permalink to this heading">#</a></h3>
<p>Removing edges and vertices require care. Suppose, a vertex in a match is specifed to be removed. There may be edges which are connected to to this vertex in the host graph. In that case, deleting the vertex will lead to zombie graphs which has dangling edges (edges whose end(s) is not connected to any vertex).</p>
<p>The following example illustrates this situation.</p>
<p>Suppose, we have the following rule for deletion: vertex 2 and edge ‘a’ will be deleted (from the host at a match) since they do not overlap!</p>
<a class="reference internal image-reference" href="_images/16.png"><img alt="Whoopsy!" class="align-center" src="_images/16.png" style="width: 650px;" /></a>
</br>
<p>Suppose we are given the following match of <code class="docutils literal notranslate"><span class="pre">Find</span></code> in a host graph. Can you see why this match is bad?</p>
<a class="reference internal image-reference" href="_images/17.png"><img alt="Whoopsy!" class="align-center" src="_images/17.png" style="width: 650px;" /></a>
</br>
<p>Removing vertex 2 from the host graph will result in a dangling edge, see the diagram picture below!</p>
<a class="reference internal image-reference" href="_images/dangling-3.png"><img alt="Whoopsy!" class="align-center" src="_images/dangling-3.png" style="width: 250px;" /></a>
<p>An appropriate match that produces no dangling edge will be:</p>
<a class="reference internal image-reference" href="_images/18.png"><img alt="Whoopsy!" class="align-center" src="_images/18.png" style="width: 550px;" /></a>
</br>
<p>For the above match, removing vertex ‘2’ and edge ‘a’ leaves the graph intact!</p>
<p>Another situation that needs care is that a match must not identify a vertex to be deleted and a vertex that needs to be retained (a vertex which overlaps) of <code class="docutils literal notranslate"><span class="pre">Find</span></code> to the same vertex in the host graph. In the deletion rule, vertex 1 must be retained and vertex 2 needs to be deleted. However, the following match identifies vertices 1 and 2 of the search pattern to the same vertex (“1,2”) in the host graph, which is bad!</p>
<a class="reference internal image-reference" href="_images/19.png"><img alt="Whoopsy!" class="align-center" src="_images/19.png" style="width: 550px;" /></a>
</br>
<p>So what should be done now – keep the vertex “1,2” or delete the vertex “1,2” from the host graph? Either choices are incorrect. A good match, in the first place, MUST avoid identifying vertices 1 and 2 of <code class="docutils literal notranslate"><span class="pre">Find</span></code> into the same vertex in the host graph. This is called the right identification condition.</p>
<div class="tip admonition">
<p class="admonition-title">Key points</p>
<p>A <strong>good match</strong> of a search pattern (for deletion of vertices and edges) will:</p>
<ul class="simple">
<li><p>satisfy the <em>no-dangling edge condition</em>.</p></li>
<li><p>identify vertices / edges to be deleted and vertices / edges to remain seperately, called the <em>right identification condition</em>.</p></li>
</ul>
</div>
<p>We will talk more about “finding a good match” once the algorithm to perform the deletion rule is set up.</p>
</section>
<section id="performing-deletion">
<h3>Performing deletion<a class="headerlink" href="#performing-deletion" title="Permalink to this heading">#</a></h3>
<p>We now have a deletion rule, a host graph and a match for <code class="docutils literal notranslate"><span class="pre">Find</span></code> in the host graph. As before, let us draw a diagram of all the information we have:</p>
<a class="reference internal image-reference" href="_images/20.png"><img alt="Whoopsy!" class="align-center" src="_images/20.png" style="width: 650px;" /></a>
</br>
<p>The new graph which results after performing the replacement (deletion) will have:</p>
<ol class="arabic simple">
<li><p>All those vertices and edges in the host graph which are outside the match, and</p></li>
<li><p>Only those vertices and edges inside the match which are under the <code class="docutils literal notranslate"><span class="pre">overlap</span></code> in <code class="docutils literal notranslate"><span class="pre">Find</span></code>.</p></li>
</ol>
<p>This means that the <code class="docutils literal notranslate"><span class="pre">overlap</span></code> will have a match in the new graph <strong>determined by the original match in the host graph</strong>. The new graph will have an injective morphism into the host graph.</p>
</br>
<a class="reference internal image-reference" href="_images/211.png"><img alt="Whoopsy!" class="align-center" src="_images/211.png" style="width: 750px;" /></a>
</br>
<p>The above square commutes! Does this shape remind you of pushouts from chapter 5? It turns out that, the host graph is the pushout of <code class="docutils literal notranslate"><span class="pre">Find</span></code> and the new graph!!</p>
<p>This indeed makes sense, because, <code class="docutils literal notranslate"><span class="pre">Find</span></code> includes vertices and edges which has been removed. Glueing together <code class="docutils literal notranslate"><span class="pre">Find</span></code> and the new graph along the overlap must give the original host graph!</p>
<p>Since the new graph completes a pushout square we shall call it as the <strong>Pushout complement</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Complement means <em>the thing that completes or brings to perfection</em>.</p>
</div>
<blockquote>
<div><p>A pushout complement is a pushout completement!</p>
</div></blockquote>
<p>Let us look at an example of computing “pushout <strong>complement</strong>”</p>
<div class="admonition-example-1 admonition">
<p class="admonition-title">Example 1</p>
<a class="reference internal image-reference" href="_images/22.png"><img alt="Whoopsy!" class="align-center" src="_images/22.png" style="width: 750px;" /></a>
<p>The nodes exclusive to <code class="docutils literal notranslate"><span class="pre">Find</span></code> must be removed from the host graph. Thus, the pushout out complement must include:</p>
<ol class="arabic simple">
<li><p>all the parts of the host graph not under the match, and</p></li>
<li><p>only those parts of the match which is included in the overlap.</p></li>
</ol>
<p>In this example, the pushout complement includes all the edges and vertices in the host graph that is not under the match (all unlabelled vertices and edges),  and includes those vertices and edges in the match which are under the image of <code class="docutils literal notranslate"><span class="pre">overlap</span></code> (vertices 1 and 2).</p>
</div>
<div class="admonition-puzzle-5 admonition">
<p class="admonition-title">Puzzle 5</p>
<p>What is the pushout complement?</p>
<p>This problem has a coarse-grain match. Vertices “1” and “2” of <code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">what</span></code> are sent to the same vertex in the host graph. Simiarly vertices “3” and “4” are sent to the same vertex in the host graph.</p>
<a class="reference internal image-reference" href="_images/231.png"><img alt="Whoopsy!" class="align-center" src="_images/231.png" style="width: 750px;" /></a>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution for Puzzle 5</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/24.png"><img alt="Whoopsy!" class="align-center" src="_images/24.png" style="width: 650px;" /></a>
</div>
</div>
<div class="admonition-puzzle-6 admonition">
<p class="admonition-title">Puzzle 6</p>
<p>What is the pushout complement?</p>
<a class="reference internal image-reference" href="_images/25.png"><img alt="Whoopsy!" class="align-center" src="_images/25.png" style="width: 750px;" /></a>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution for Puzzle 6</p>
<p>The pushout complement includes all the edges and vertices in the host graph that is not under the match (all unlabelled vertices and edges),and includes those vertices and edges in the match which are in Graph-2.</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/26.png"><img alt="Whoopsy!" class="align-center" src="_images/26.png" style="width: 650px;" /></a>
</div>
</div>
</section>
<section id="managing-the-requirements-of-a-match">
<h3>Managing the requirements of a match<a class="headerlink" href="#managing-the-requirements-of-a-match" title="Permalink to this heading">#</a></h3>
<p>In programming, there is a concept called “edge case”. These are special situations where a code will fail to produce appropriate results. For example, a bug that occurs in only iPhone. They are called “edge cases” because these situations lie outside the normal flow of a code / algorithm and custom extra code is added for their special handling. There is an anecdote, “Edge cases are impossible to avoid, so keep them simple”.</p>
<p>Does our procedure to remove vertices and edges at a match have edge cases?</p>
<div class="admonition-million-dollar-questions admonition">
<p class="admonition-title">Million dollar questions:</p>
<ol class="arabic simple">
<li><p>What will happen when a match that violates the “no-dangling edge” requirement is supplied for computing the pushout-complement?</p></li>
<li><p>What will happen when a match that violates the “right identification” requirement is supplied for computing the pushout-complement?</p></li>
</ol>
</div>
<p>If the pushout-completement produces bad results, then these violations will be edge cases which needs to be handled outside the completement procedure – like writing an algorithm to first check if the match supplied is appropriate.</p>
<p>The good news is that the <em>universal nature</em> of pushouts guarantee us that pushout-complement will exist ONLY for appropraite matches!! That is, replacement will be done only when the match is appropriate. Otherwise, the procedure will not proceed further! Thereby, there are no edge cases in our procedure!!! To drive home home this message, here are two examples. We leave it to the reader to check if a pushout complement exists in these cases.</p>
<div class="admonition-example-2 admonition">
<p class="admonition-title">Example 2</p>
<p>Is there a pushout complement? If not, why?</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/27.png"><img alt="Whoopsy!" class="align-center" src="_images/27.png" style="width: 600px;" /></a>
</div>
</div>
<div class="admonition-example-3 admonition">
<p class="admonition-title">Example 3</p>
<p>Is there a pushout complement? If not, why?</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/28.png"><img alt="Whoopsy!" class="align-center" src="_images/28.png" style="width: 600px;" /></a>
</div>
</div>
<p>We did all the heavy lifting early-on by relying on relational thinking, considering all the relevant relationships, and getting the <em>plumbing</em> right! The pay off is that things flow smoothly without the need for extra intervention!</p>
<blockquote>
<div><p>The procedure is the guard rail!</p>
</div></blockquote>
<p>A final question we must ask is that are pushout complements unique? The pushout completement graph computed for a deletion rule is unique because the deletion rule is an injective morphism.</p>
<div class="tip admonition">
<p class="admonition-title">Key point</p>
<p>Vertices and edges of a graph is removed by computing pushout complement.</p>
</div>
</section>
</section>
<section id="adding-vertices-and-edges-to-a-graph">
<h2>6.5 Adding vertices and edges to a graph<a class="headerlink" href="#adding-vertices-and-edges-to-a-graph" title="Permalink to this heading">#</a></h2>
<p>We applied the deletion rule to remove vertices and edges from a host graph at the match. We called the resulting graph a pushout complement.  We are now ready to add vertices and edges specified by the addition rule. However, we will now work with the pushout complement we computed in the previous step. The idea is that we first deleted, we are now ready to add. That will complete our replacement procedure! Hurray!</p>
<p>As always, let us begin by drawing a diagram of the gre relationships we got! The advantage of drawing digrams is that it arranges information in an intuitive way that it makes it easier to “see” the solution!</p>
<a class="reference internal image-reference" href="_images/29.png"><img alt="Whoopsy!" class="align-center" src="_images/29.png" style="width: 550px;" /></a>
</br>
<p>We shall focus on the lower half of the diagram now where addition of vertices and edges shall proceed!</p>
<a class="reference internal image-reference" href="_images/30.png"><img alt="Whoopsy!" class="align-center" src="_images/30.png" style="width: 550px;" /></a>
</br>
<p>We now want to compute a new graph by adding the vertices and edges exclusive to <code class="docutils literal notranslate"><span class="pre">Replace</span></code> to the host graph at the match! Do you see how?! Does the shape of the diagram ringbells?</p>
<div class="dropdown admonition">
<p class="admonition-title">Yes, the answer is</p>
<p>Pushouts!!</p>
</div>
<p>By computing the pushout of the above diagram, we glue vertices / edges to be added to the pushout complement along the overlap. Our completed diagram looks as follows now:</p>
<a class="reference internal image-reference" href="_images/311.png"><img alt="Whoopsy!" class="align-center" src="_images/311.png" style="width: 550px;" /></a>
<p>Let us try out some examples to make sure we are right! We start from the example we saw in the previous section!</p>
<div class="admonition-example-1-continued admonition">
<p class="admonition-title">Example 1 continued …</p>
<p>Suppose, we have an addition rule like this, and the match obtained at the pushout complement step:</p>
<a class="reference internal image-reference" href="_images/add-example-rule.png"><img alt="Whoopsy!" class="align-center" src="_images/add-example-rule.png" style="width: 550px;" /></a>
</br>
<p>The <code class="docutils literal notranslate"><span class="pre">Replace</span></code> has an edge between vertices 1 and 2. Since this edge is exclusive to <code class="docutils literal notranslate"><span class="pre">Replace</span></code> (<code class="docutils literal notranslate"><span class="pre">overlap</span></code> does not have this edge between 1 and 2), this edge will be added to the host graph. Computing the pushout, precisely does this to the pushout complement!</p>
<a class="reference internal image-reference" href="_images/add-example-1.png"><img alt="Whoopsy!" class="align-center" src="_images/add-example-1.png" style="width: 550px;" /></a>
</div>
<p>The complete picture of the replacement procedure (deletion and addition) for Example 1 is as follows:</p>
<p>We have the following replacement rule and a match in the host graph.</p>
<a class="reference internal image-reference" href="_images/complete-example-rules.png"><img alt="Whoopsy!" class="align-center" src="_images/complete-example-rules.png" style="width: 550px;" /></a>
</br>
<p>Computing the pushout complement followed by the pushout completes the replacement procedure!</p>
<a class="reference internal image-reference" href="_images/complete-example.png"><img alt="Whoopsy!" class="align-center" src="_images/complete-example.png" style="width: 550px;" /></a>
<!----------------------------->
<div class="admonition-puzzle-7-continued-from-puzzle-5 admonition">
<p class="admonition-title">Puzzle 7 (continued from Puzzle 5 )</p>
<p>Compute the pushout:</p>
<a class="reference internal image-reference" href="_images/DPO-ex-1.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex-1.png" style="width: 550px;" /></a>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution for Puzzle 7</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Replace</span></code> has an edge between vertices 1 and 2. Since this edge is exclusive to <code class="docutils literal notranslate"><span class="pre">Replace</span></code> (<code class="docutils literal notranslate"><span class="pre">overlap</span></code> does not have this edge between 1 and 2), this edge manifests as self-loop in the pushout.</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/DPO-ex1-sol.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex1-sol.png" style="width: 650px;" /></a>
</div>
</div>
<div class="admonition-puzzle-8-continued-from-puzzle-6 admonition">
<p class="admonition-title">Puzzle 8 (continued from Puzzle 6 )</p>
<a class="reference internal image-reference" href="_images/DPO-ex-2.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex-2.png" style="width: 550px;" /></a>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution for Puzzle 8</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/DPO-ex2-sol.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex2-sol.png" style="width: 650px;" /></a>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Key point 1</p>
<p>Vertices and edges are added by computing pushout.</p>
</div>
<div class="tip admonition" id="find-and-replace-machinery">
<p class="admonition-title">Key point 2: Find-and-replace machinery for graphs</p>
<p>A thing of beauty!!</p>
<p>A search pattern (<code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">what</span></code>) found in a graph is carved into another pattern (<code class="docutils literal notranslate"><span class="pre">Replace</span> <span class="pre">with</span></code>) by computing pushout complement and followed by pushout.</p>
<a class="reference internal image-reference" href="_images/31b.png"><img alt="Whoopsy!" class="align-center" src="_images/31b.png" style="width: 650px;" /></a>
</div>
<p>Common literature calls our “Find-and-replace machinery” for graphs as Double Pushout Rewriting (DPO).</p>
</section>
<section id="a-few-use-cases-of-find-and-replace">
<h2>6.6 A few use cases of find-and-replace<a class="headerlink" href="#a-few-use-cases-of-find-and-replace" title="Permalink to this heading">#</a></h2>
<section id="chemistry">
<h3>Chemistry<a class="headerlink" href="#chemistry" title="Permalink to this heading">#</a></h3>
<p>In chemistry, <strong>click reactions</strong> give high yield with low requirements and form only harmless by-products. A specific click reaction called the Diels-Alder’s reaction is one of the most useful ones in material design. Discovered in 1928, Otto Diels and Kurt Alder were awareded Nobel prize for their fascinating discovery.</p>
</br>
<a class="reference internal image-reference" href="_images/reaction.png"><img alt="Whoopsy!" class="align-center" src="_images/reaction.png" style="width: 250px;" /></a>
</br>
<p>In this section, we will see that Diel-Alder’s reaction is a double pushout rewrite - the  “Find and replace” machinery which uses pushouts. In this example,  we will view molecules as undirected graphs where atoms are vertices and the chemical bonds are edges. Diel-Alder’s reaction is the following, “Find-and-replace” rule for a specific molecule (we do not worry about the names of these molecules because that is not the point).</p>
<a class="reference internal image-reference" href="_images/Adler-1.png"><img alt="Whoopsy!" class="align-center" src="_images/Adler-1.png" style="width: 350px;" /></a>
</br>
<p>Standard chemistry books write this reaction as follows:</p>
<a class="reference internal image-reference" href="_images/Diel-Alder.png"><img alt="Whoopsy!" class="align-center" src="_images/Diel-Alder.png" style="width: 350px;" /></a>
<p>Let us now use this rule on a substrate molecule which will act as the host graph.</p>
<a class="reference internal image-reference" href="_images/Adler-substrate.png"><img alt="Whoopsy!" class="align-center" src="_images/Adler-substrate.png" style="width: 650px;" /></a>
</br>
<p>Applying the double-pushout find-and-replace, we precisely get the final product of this chemical reaction!!</p>
<a class="reference internal image-reference" href="_images/Adler.png"><img alt="Whoopsy!" class="align-center" src="_images/Adler.png" style="width: 650px;" /></a>
</section>
<section id="game-design">
<h3>Game design<a class="headerlink" href="#game-design" title="Permalink to this heading">#</a></h3>
<p>Bob is an expert in designing game layout. He designs environment for games. He uses a layout editor for designing cool layouts. The layout keeps track of Bob’s design as an directed graph components of the environment are vertices. Two vertices are connected by an arrow if the player can navigate between these two components in the game in the direction of the arrow.</p>
<p>Bob is currently designing a game of Dungeons and Dragons, and have added two rooms to his dungeon – Room 1 and Room 2, and made Room2 directly accessible from Room 1.</p>
<p>However, Bob thought for a moment, and told to himself, “Hey, how about a corridor in-between?”.</p>
<a class="reference internal image-reference" href="_images/corridor.png"><img alt="Whoopsy!" class="align-center" src="_images/corridor.png" style="width: 350px;" /></a>
</br>
<p>Now a corridor needs to be added between Room 1 and Room 2, and arrows need to be redrawn as follows!</p>
<a class="reference internal image-reference" href="_images/game-design-2.png"><img alt="Whoopsy!" class="align-center" src="_images/game-design-2.png" style="width: 650px;" /></a>
</br>
<p>Reshaping directed graph follows the same idea as undirected graphs. The find-and-replace rule shall be applied to reshape Bob’s game layoout!</p>
</section>
</section>
<section id="algebraic-julia-for-find-and-replace-in-graphs">
<h2>6.7 Algebraic Julia for find-and-replace in graphs<a class="headerlink" href="#algebraic-julia-for-find-and-replace-in-graphs" title="Permalink to this heading">#</a></h2>
<p>This section will demonstrate how graph “find-and-replace” can be performed in a computer using the Algebraic Julia library! We provide the Algebraic Julia code for the puzzles in this chapter. The reader is invited to run these code examples and have fun!</p>
<section id="finding-matches-of-a-search-pattern">
<h3>Finding matches of a search pattern<a class="headerlink" href="#finding-matches-of-a-search-pattern" title="Permalink to this heading">#</a></h3>
<div class="admonition-puzzle-4 admonition">
<p class="admonition-title">Puzzle 4</p>
<p>Find at least two matches of the search pattern in the host graph.</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/match-ex1.png"><img alt="Whoopsy!" class="align-center" src="_images/match-ex1.png" style="width: 350px;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Puzzle 4 solution</span>
<span class="c">#------------------</span>

<span class="k">using</span><span class="w"> </span><span class="n">Catlab</span>

<span class="n">find</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cycle_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>

<span class="c"># There are 12 matches because the path can start </span>
<span class="c"># at any of the three vertices of the cycle. </span>
<span class="c"># There are two directions each can go. And for each we decide</span>
<span class="c"># for both edges whether they go clockwise or not, </span>
<span class="c"># so that is 3 x 2 x 2 independent choices.</span>

<span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphisms</span><span class="p">(</span><span class="n">find</span><span class="p">,</span><span class="w"> </span><span class="n">host</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># uncomment the following line to visualize the `find` graph</span>
<span class="c"># to_graphviz(find)</span>

<span class="c"># uncomment the following line to visualize the host</span>
<span class="c"># to_graphviz(host)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="is-this-a-pushout-complement">
<h3>Is this a pushout complement?<a class="headerlink" href="#is-this-a-pushout-complement" title="Permalink to this heading">#</a></h3>
<div class="admonition-example-2 admonition">
<p class="admonition-title">Example 2</p>
<p>(Need to be illustrated in the style matching above puzzles)</p>
<p>Is there a pushout complement? If not, why?</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/dangling-puzzle.png"><img alt="Whoopsy!" class="align-center" src="_images/dangling-puzzle.png" style="width: 400px;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Example 2 solution</span>
<span class="c">#--------------------</span>

<span class="k">using</span><span class="w"> </span><span class="n">Catlab</span>
<span class="k">using</span><span class="w"> </span><span class="n">AlgebraicRewriting</span><span class="o">.</span><span class="n">CSets</span>
<span class="n">overlap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">find</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>

<span class="c"># There is only one homomorphism (up to symmetry)</span>
<span class="c"># So we can pick an arbitrary one</span>
<span class="n">del</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">overlap</span><span class="p">,</span><span class="w"> </span><span class="n">find</span><span class="p">)</span>
<span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">find</span><span class="p">,</span><span class="w"> </span><span class="n">host</span><span class="p">)</span>

<span class="c"># We can check whether or not the pushout complement exists</span>
<span class="n">can_pushout_complement</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># We can get a list of the specific violations</span>
<span class="n">gluing_conditions</span><span class="p">(</span><span class="n">ComposablePair</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-example-3 admonition">
<p class="admonition-title">Example 3</p>
<p>Is there a pushout complement? If not, why?</p>
<div class="wrapper docutils">
<a class="reference internal image-reference" href="_images/right-identity-puzzle.png"><img alt="Whoopsy!" class="align-center" src="_images/right-identity-puzzle.png" style="width: 400px;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Example 3 solution</span>
<span class="c">#-------------------</span>

<span class="k">using</span><span class="w"> </span><span class="n">Catlab</span>
<span class="k">using</span><span class="w"> </span><span class="n">AlgebraicRewriting</span><span class="o">.</span><span class="n">CSets</span>
<span class="n">overlap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">find</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>

<span class="c"># There is only one homomorphism (up to symmetry)</span>
<span class="c"># So we can pick an arbitrary one</span>
<span class="n">del</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">overlap</span><span class="p">,</span><span class="w"> </span><span class="n">find</span><span class="p">)</span>

<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@acset</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span><span class="n">V</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">E</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span><span class="w"> </span><span class="n">tgt</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span><span class="w"> </span><span class="n">inv</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="k">end</span>
<span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">find</span><span class="p">,</span><span class="w"> </span><span class="n">host</span><span class="p">)</span>

<span class="c"># We can check whether or not the pushout complement exists</span>
<span class="n">can_pushout_complement</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># We can get a list of the specific violations</span>
<span class="n">gluing_conditions</span><span class="p">(</span><span class="n">ComposablePair</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="computing-double-pushouts">
<h3>Computing double-pushouts<a class="headerlink" href="#computing-double-pushouts" title="Permalink to this heading">#</a></h3>
<div class="admonition-puzzle-5 admonition">
<p class="admonition-title">Puzzle 5</p>
<p>What is the pushout complement?</p>
<a class="reference internal image-reference" href="_images/Ex-1.png"><img alt="Whoopsy!" class="align-center" src="_images/Ex-1.png" style="width: 450px;" /></a>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Puzzle 5 solution</span>
<span class="c"># -----------------</span>

<span class="k">using</span><span class="w"> </span><span class="n">Catlab</span>
<span class="k">using</span><span class="w"> </span><span class="n">AlgebraicRewriting</span><span class="o">.</span><span class="n">CSets</span>

<span class="n">Overlap</span><span class="p">,</span><span class="w"> </span><span class="n">Find₅</span><span class="p">,</span><span class="w"> </span><span class="n">Host₅</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="o">.</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">])</span>
<span class="n">del</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ACSetTransformation</span><span class="p">(</span><span class="n">Overlap</span><span class="p">,</span><span class="w"> </span><span class="n">Find₅</span><span class="p">;</span><span class="w"> </span><span class="n">V</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ACSetTransformation</span><span class="p">(</span><span class="n">Find₅</span><span class="p">,</span><span class="w"> </span><span class="n">Host₅</span><span class="p">;</span><span class="w"> </span><span class="n">V</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">O_PC₅</span><span class="p">,</span><span class="w"> </span><span class="n">PC_H₅</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pushout_complement</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">)</span>

<span class="n">to_graphviz</span><span class="p">(</span><span class="n">dom</span><span class="p">(</span><span class="n">PC_H₅</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-puzzle-7-continued-from-puzzle-5 admonition">
<p class="admonition-title">Puzzle 7 (continued from Puzzle 5 )</p>
<p>Compute the pushout:</p>
<a class="reference internal image-reference" href="_images/DPO-ex-1.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex-1.png" style="width: 550px;" /></a>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Puzzle 7 solution (continuation from puzzle 5 solution)</span>
<span class="c">#--------------------------------------------------------</span>

<span class="c"># Monic=true enforces that the two vertices in Overlap are not mapped to a</span>
<span class="c"># single vertex in the single-edge graph.</span>
<span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">Overlap</span><span class="p">,</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="n">monic</span><span class="o">=</span><span class="nb">true</span><span class="p">)</span>

<span class="n">fromR</span><span class="p">,</span><span class="w"> </span><span class="n">fromPC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pushout</span><span class="p">(</span><span class="n">O_PC₅</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">)</span>
<span class="n">to_graphviz</span><span class="p">(</span><span class="n">codom</span><span class="p">(</span><span class="n">fromR</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-puzzle-6 admonition">
<p class="admonition-title">Puzzle 6</p>
<p>What is the pushout complement?</p>
<a class="reference internal image-reference" href="_images/Ex-2.png"><img alt="Whoopsy!" class="align-center" src="_images/Ex-2.png" style="width: 450px;" /></a>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Puzzle 6 solution</span>
<span class="c"># -----------------</span>

<span class="k">using</span><span class="w"> </span><span class="n">Catlab</span>
<span class="k">using</span><span class="w"> </span><span class="n">AlgebraicRewriting</span><span class="o">.</span><span class="n">CSets</span>

<span class="n">Overlap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">Find₆</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SymmetricGraph</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">add_edge!</span><span class="p">(</span><span class="n">Find₆</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>

<span class="n">Host₆</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>

<span class="n">del</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ACSetTransformation</span><span class="p">(</span><span class="n">Overlap</span><span class="p">,</span><span class="w"> </span><span class="n">Find₆</span><span class="p">;</span><span class="w"> </span><span class="n">V</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">Find₆</span><span class="p">,</span><span class="w"> </span><span class="n">Host₆</span><span class="p">;</span><span class="w"> </span><span class="n">initial</span><span class="o">=</span><span class="p">(</span><span class="n">V</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],))</span>

<span class="c"># PC stands for Pushout Complement; O stands for overlap; H stands for host</span>
<span class="c"># O_PC₆ is the map from the overlap to the PC</span>
<span class="c"># PC_H₆ is the map from the PC to the host</span>
<span class="n">O_PC₆</span><span class="p">,</span><span class="w"> </span><span class="n">PC_H₆</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pushout_complement</span><span class="p">(</span><span class="n">del</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="p">)</span>

<span class="n">to_graphviz</span><span class="p">(</span><span class="n">dom</span><span class="p">(</span><span class="n">PC_H₆</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-puzzle-8-continued-from-puzzle-6 admonition">
<p class="admonition-title">Puzzle 8 (continued from Puzzle 6 )</p>
<p>Complete the pushout</p>
<a class="reference internal image-reference" href="_images/DPO-ex-2.png"><img alt="Whoopsy!" class="align-center" src="_images/DPO-ex-2.png" style="width: 550px;" /></a>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Puzzle 8 solution (continuation from puzzle 6 solution)</span>
<span class="c">#--------------------------------------------------------</span>

<span class="c"># Monic=true enforces that the two vertices in Overlap are not mapped to a</span>
<span class="c"># single vertex in the single-edge graph.</span>
<span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homomorphism</span><span class="p">(</span><span class="n">Overlap</span><span class="p">,</span><span class="w"> </span><span class="n">path_graph</span><span class="p">(</span><span class="n">SymmetricGraph</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="n">monic</span><span class="o">=</span><span class="nb">true</span><span class="p">)</span>

<span class="n">fromR</span><span class="p">,</span><span class="w"> </span><span class="n">fromPC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pushout</span><span class="p">(</span><span class="n">O_PC₆</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">)</span>
<span class="n">to_graphviz</span><span class="p">(</span><span class="n">codom</span><span class="p">(</span><span class="n">fromR</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="relational-thinking-is-hard-but-good">
<h2>6.8 Relational thinking is hard but good!<a class="headerlink" href="#relational-thinking-is-hard-but-good" title="Permalink to this heading">#</a></h2>
<p>Congratulations for making it this far! Relational thinking might feel hard but it also brings so much value to our thinking and how we interact with the world around us! Here is our two cents on why we think so!</p>
<section id="relational-thinking-shifts-vocabulary">
<h3>Relational thinking shifts vocabulary<a class="headerlink" href="#relational-thinking-shifts-vocabulary" title="Permalink to this heading">#</a></h3>
<p>We would first like to bring reader’s attention to the some vocabulary common in practice since language influences thinking and vice versa.</p>
<p>The idea of “Find and replace” is a crude one in the sense that it is unaware of the context of replacement. A text editor will allow me to replace “truth” by “lie” anywhere in a document. Context-unaware find and replace leads to chaos.</p>
<p>The mathematics we used to “find-and-replace” in graphs tells us that it is not a replacement, rather it is a careful integration of a new pattern in the place of an exisiting pattern. <em>To integrate</em> is organic and harmonoius by nature! While <em>to replace</em> has an air of superiority about it! Replace is useful – replacing inflated tyres, replacing broken chain, etc.! However, in situations involving multiple interconnected entities, relational thinking recommends a shift in vocabulary from “Find-and-replace” to “Find-and-integrate” ot become a whole!</p>
<div class="tip admonition">
<p class="admonition-title">Slogan</p>
<p>Replace “replace” by “integrate”</p>
</div>
<p>This slogan probably is the answer to all the political issues which have been brought up at the beginning of this chapter.</p>
</section>
<section id="the-order-of-processes">
<h3>The order of processes<a class="headerlink" href="#the-order-of-processes" title="Permalink to this heading">#</a></h3>
<p>Let us take a moment reflect on the process of modifying a graph guided by relational thinking!</p>
<p>As we saw in this chapter, we modify by searching for a pattern in a graph. Once a match is found, we first remove and then add vertices and edges as indicated by the pattern to be integrated. Loosely speaking, in a free world, nothing prevents one from switching the order of these operations – first add new vertices and edges and then remove, even though remove-first and add-next is more economic. An add-first and remove-next procedure must handle accidental errors which are otherwise absent in the other order:</p>
<ul class="simple">
<li><p>Removing what has been added</p></li>
<li><p>Adding over the removal region.</p></li>
</ul>
<p>Hence, to remove first and to add next is elegant and as well as cleaner!</p>
<p>As we saw in double pushouts, relational thinking precisely follows this order without any manual intervention! Somehow, the mathematics ‘knew’ that it must first remove by computing pushout complement and then add by computing pushout over that complement! Switching the order is not possible. It is a wonder how did the math get the ordering right?! Even though it is a mystery, there is a message that is being conveyed.</p>
<div class="tip admonition">
<p class="admonition-title">Slogan</p>
<p>Think relationally to get it right rightaway!!</p>
</div>
</section>
</section>
<section id="summary">
<h2>6.9 Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>For modifying graphs, we first compute pushout complement followed by a pushout! All the edge cases that may otherwise occur when removing edges and vertices are automatically handled due to the universal nature of pushout! And finally,</p>
<a class="reference internal image-reference" href="_images/good-thinking.png"><img alt="Whoopsy!" class="align-center" src="_images/good-thinking.png" style="width: 500px;" /></a>
</section>
<section id="footnotes-and-references">
<h2>Footnotes and References<a class="headerlink" href="#footnotes-and-references" title="Permalink to this heading">#</a></h2>
<p>[1]. Few of the examples and puzzles in this chapter were inspired by <a class="reference external" href="https://steemit.com/mathematics/&#64;markgritter/double-pushouts-on-graphs">the handout</a> titled “Double Pushout Rewriting in Chemistry” authored by Georg Fischer, and Hannah Gschwentner, and <a class="reference external" href="https://steemit.com/mathematics/&#64;markgritter/double-pushouts-on-graphs">the blog post</a> “Double pushouts on Graphs” by Mark Gritter!</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ToposInstitute/AlgJulia-Book",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "julia-1.10"
        },
        kernelOptions: {
            name: "julia-1.10",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'julia-1.10'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="chp5-graph-gluing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 5: Combining Graphs</p>
      </div>
    </a>
    <a class="right-next"
       href="chp7-dpo-application.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 7: A Look Beyond– Evolving World Models</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">6.1 Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specs-for-find-and-replace">6.2 Specs for “find and replace”</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-delete-and-add">Replace = Delete and Add</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-match">6.3 Finding a match</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#removing-vertices-and-edges-from-a-graph">6.4 Removing vertices and edges from a graph</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-match-to-remove-vertices-edges">Finding a match to remove vertices/edges</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performing-deletion">Performing deletion</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-the-requirements-of-a-match">Managing the requirements of a match</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-vertices-and-edges-to-a-graph">6.5 Adding vertices and edges to a graph</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-few-use-cases-of-find-and-replace">6.6 A few use cases of find-and-replace</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#chemistry">Chemistry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#game-design">Game design</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#algebraic-julia-for-find-and-replace-in-graphs">6.7 Algebraic Julia for find-and-replace in graphs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-matches-of-a-search-pattern">Finding matches of a search pattern</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-this-a-pushout-complement">Is this a pushout complement?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-double-pushouts">Computing double-pushouts</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-thinking-is-hard-but-good">6.8 Relational thinking is hard but good!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-thinking-shifts-vocabulary">Relational thinking shifts vocabulary</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-order-of-processes">The order of processes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">6.9 Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#footnotes-and-references">Footnotes and References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>